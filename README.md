# Task Manager (ToDo List)

Это реализация тестового задания "ToDo List" в соответствии с требованиями [BeeJee](https://beejee.ru/coding-challenge-requirements-nodejs).

Приложение позволяет пользователям создавать задачи, просматривать их список с пагинацией и сортировкой. Администратор может войти в систему и редактировать задачи (изменять текст, отмечать как выполненные). Приложение отслеживает, если задача была отредактирована администратором.

## Демонстрация

Рабочее приложение доступно по адресу: [https://task-manager-frontend-pi.vercel.app/](https://task-manager-frontend-pi.vercel.app/)

## Технологии

### Бэкенд
- **Node.js** (LTS)
- **Express.js**
- **Prisma ORM**
- **PostgreSQL** (хостинг: Railway)

### Фронтенд
- **React** (Vite)
- **Redux Toolkit** (для управления состоянием)
- **Axios** (для HTTP-запросов)
- **react-hook-form** (для работы с формами)
- **Yup** (для валидации форм)

## Локальный запуск

### Предварительные требования

- Node.js (LTS, например, 18 или 20)
- Git
- Доступ к базе данных PostgreSQL (локально или удаленно, например, на Railway)

### Установка

1.  Клонируйте репозиторий:
    ```bash
    git clone https://github.com/PavelHopson/task-manager.git
    cd task-manager
    ```
2.  Создайте файлы `.env`:
    -   В папке `backend`, создайте файл `.env` со следующим содержимым (замените значения на ваши):
        ```env
        DATABASE_URL="postgresql://<пользователь>:<пароль>@<хост>:<порт>/<имя_базы>"
        JWT_SECRET="ваш_очень_секретный_ключ_для_JWT"
        ADMIN_USER="admin"
        ADMIN_PASS="123"
        PORT=4000
        ```
        *Примечание: `DATABASE_URL` должен указывать на вашу базу данных PostgreSQL.*
    -   В папке `frontend` обычно не требуется файл `.env` для этого проекта, так как `VITE_API_BASE_URL` задается при деплое. Для локальной разработки фронтенд по умолчанию будет обращаться к `http://localhost:4000/api`.

3.  Установите зависимости для бэкенда:
    ```bash
    cd backend
    npm install
    ```
4.  Установите зависимости для фронтенда:
    ```bash
    cd ../frontend
    npm install
    cd ..
    ```

### Запуск

1.  Запустите сервер базы данных (если локальный).
2.  Запустите бэкенд (в папке `backend`):
    ```bash
    cd backend
    npm run dev
    ```
    Сервер запустится по адресу `http://localhost:4000`.
3.  Запустите фронтенд (в папке `frontend`):
    ```bash
    cd ../frontend
    npm run dev
    ```
    Фронтенд запустится по адресу `http://localhost:5173`.

### Миграция базы данных (если нужно)

Если вы настраиваете базу данных с нуля, вам нужно применить миграции Prisma:

1.  Убедитесь, что `DATABASE_URL` в `backend/.env` корректна.
2.  В папке `backend` выполните:
    ```bash
    npx prisma migrate deploy
    ```
    (Или `npx prisma migrate dev --name init` для первой миграции)

## Сценарий тестирования

Приложение было протестировано по сценарию, предоставленному BeeJee:

1.  ✅ Просмотр списка задач с полями: имя пользователя, email, текст задачи, статус.
2.  ✅ Создание задачи с валидацией (обязательные поля, валидный email).
3.  ✅ Проверка на XSS (создание задачи с `<script>alert('test')</script>` не вызывает alert).
4.  ✅ Пагинация по 3 задачи на странице.
5.  ✅ Сортировка по имени пользователя, email и статусу (asc/desc).
6.  ✅ Вход администратора (`admin`/`123`).
7.  ✅ Редактирование задачи администратором (текст, статус).
8.  ✅ Отображение статуса "Completed" для завершенных задач.
9.  ✅ Отображение отметки "отредактировано администратором" при изменении текста админом.
10. ✅ Синхронизация состояния аутентификации между вкладками браузера (logout в одной вкладке скрывает кнопки редактирования в другой без перезагрузки).

## Деплой

Этот проект был задеплоен с использованием следующих сервисов:
-   **Бэкенд:** Railway (Node.js)
-   **Фронтенд:** Vercel (React/Vite)
-   **База данных:** Railway (PostgreSQL)

## Затраченное время

Примерное общее время, затраченное на выполнение тестового задания: **4 часа 22 минуты**.
